{% extends "base/base.html" %} {% block styles %}
<style type="text/css">
    hr {
        margin-top: 10px;
        margin-bottom: 10px
    }
    #donatee {
        color: #0720d2;
        font-size: 16px;
        font-weight: 600;
    }
</style>
{% endblock %} {% block script %}
<script type="text/javascript">
    $(document).ready(function(){
        $("#showOnlyMe").change(function() {
            if ($("#showOnlyMe")[0].checked){
                $("#trace_table_all").hide();
                $("#trace_table_me").show();
            }else{
                $("#trace_table_all").show();
                $("#trace_table_me").hide();
            }
        });
    });
</script>
{% endblock %} 
{% block content %}

<div class="col-md-12">
    <div class="panel panel-white" id="js-alerts">
        <div class="panel-heading clearfix">
            <h4 class="panel-title">募捐项目"{{res_title}}"的捐款明细</h4>
        </div>
        <div class="panel-body">
            {% if donatee != current_user.address %}
            <div class="row" style="margin-bottom: 15px;">
                
                <div class="col-md-12 col-lg-8" id="donatee">
                    <div class="panel panel-white">
                        <div class="panel-body">
                            <span>受捐人地址：</span>
                            <span>{{donatee}}</span>
                        </div>
                    </div>
                </div>

                <div class="col-md-12 col-lg-4">
                    <div class="panel panel-white">
                        <div class="panel-body text-center">
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" id="showOnlyMe"> 
                                <label class="form-check-label" for="showOnlyMe">只显示我的捐款信息</label>
                            </div>           
                        </div>
                    </div>
                          
                </div>
            </div>

            {% endif %}
            <div class="row">
                <div class="col-sm-12 col-md-12 col-lg-12">
                    <table class="table table-hover" id="trace_table_all">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>捐款人地址</th>
                                <th>捐款金额(ED)</th>
                                <th>捐款时间</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% if result %} 
                                {% for idx, cert in enumerate(result) %}
                                <tr>
                                    <th scope="row">{{idx}}</th>
                                    <td>
                                        <!-- {% if donatee==current_user.address %}
                                        <a href="{{ url_for('user', userid=cert.userid) }}" style="color: #0a9a08;">{{cert.address}}</a>
                                        {% else %}
                                        {{cert.address}}
                                        {% endif %} -->
                                        {{cert.address}}
                                    </td>
                                    <td>{{cert.value}}</td>
                                    <td>{{cert.timestamp}}</td>
                                </tr>
                                {% endfor %} 
                            {% else %}
                            <td colspan="7">
                                该项目暂时无人捐款
                            </td>
                            {% endif %}
                        </tbody>
                    </table>
                    <table class="table table-hover" id="trace_table_me" style="display: none;">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>捐款人地址</th>
                                <th>捐款金额(ED)</th>
                                <th>捐款时间</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% if result %} 
                                {% for idx, cert in enumerate(result) %}
                                {% if cert.address == current_user.address %}
                                <tr>
                                    <th scope="row">{{idx}}</th>
                                    <td>
                                        <!-- {% if donatee==current_user.address %}
                                        <a href="{{ url_for('user', userid=cert.userid) }}" style="color: #0a9a08;">{{cert.address}}</a>
                                        {% else %}
                                        {{cert.address}}
                                        {% endif %} -->
                                        {{cert.address}}
                                    </td>
                                    <td>{{cert.value}}</td>
                                    <td>{{cert.timestamp}}</td>
                                </tr>
                                {% endif %}
                                {% endfor %} 
                            {% else %}
                            <td colspan="7">
                                该项目暂时无人捐款
                            </td>
                            {% endif %}
                        </tbody>
                    </table>
                </div>
                
            </div>
            
        </div>
    </div>
</div>

{% endblock %}